<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>连接websocket</title>
        <style type="text/css">
            
        </style>
    </head>
    <body>
        <script src="https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js"></script>
        <script>
            /*, {
                transportOptions: {
                    polling: {
                        extraHeaders: {
                            'x-client': 'abc'
                        }
                    }
                }
            }*/
            (() => {
                let socket = io('http://localhost:3000?token=112345');
                socket.on('connect', (e) => {
                    console.log('连接成功', e);
                    let send = {
                        userId: 2,
                        content: '我是2用户'
                    };
                    socket.emit('message', send);
                    socket.on('receive', data => {
                        console.log(data, '接收成功');
                    });
                    setTimeout(() => {
                        socket.emit('message', send);
                    }, 5000);
                    setTimeout(() => {
                        socket.emit('message', send);
                    }, 20000);
                    /*socket.emit('client message', {msg:'hi, server'});
                    socket.on('new_user', info => {
                        console.log(info);
                    })*/
                });
            })();
        </script>
    </body>
</html>